(function(e){function t(t){for(var r,i,s=t[0],l=t[1],c=t[2],m=0,p=[];m<s.length;m++)i=s[m],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&p.push(n[i][0]),n[i]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);u&&u(t);while(p.length)p.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],r=!0,s=1;s<a.length;s++){var l=a[s];0!==n[l]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=a[0]))}return e}var r={},n={app:0},o=[];function i(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=r,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(a,r,function(t){return e[t]}.bind(null,r));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("router-view")],1)},o=[],i={name:"App",components:{},data:function(){return{}}},s=i,l=a("2877"),c=a("6544"),u=a.n(c),m=a("7496"),p=Object(l["a"])(s,n,o,!1,null,null,null),d=p.exports;u()(p,{VApp:m["a"]});var f=a("f309");a("d1e78");r["a"].use(f["a"]);var v=new f["a"]({}),h=(a("b0c0"),a("8c4f")),g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{staticClass:" pa-4 background",attrs:{height:"100%",width:"100%",flat:""}},[a("v-card",{staticClass:"centered login-card",attrs:{elevation:"2",outlined:"",tile:""}},[a("v-form",{ref:"form",staticClass:"login-form"},[a("div",{staticClass:"title-login"},[a("h2",[a("strong",[e._v("Login")])])]),a("v-text-field",{attrs:{name:"email",label:"E-mail",required:""},on:{input:e.cleanErrorMessage},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),a("v-text-field",{attrs:{name:"password",type:"password",label:"Senha",required:""},on:{input:e.cleanErrorMessage},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),a("div",{staticClass:"erro-msg"},[e._v(e._s(e.error))]),a("v-btn",{staticClass:"btn-login",attrs:{color:"#ee675c",height:"45px",disabled:e.allFieldsFilled},on:{click:e.login}},[a("div",{staticClass:"white-text"},[e._v("Entrar "),a("v-icon",[e._v("mdi-map-marker")])],1)]),a("div",{staticClass:"sign-up"},[e._v("Não tem conta? "),a("a",{attrs:{href:"../signUp"}},[e._v("Cadastre-se")])])],1)],1)],1)},b=[],_=(a("b383"),a("7db0"),a("96cf"),a("1da1")),w=a("bc3a"),x=a.n(w),k=Object({NODE_ENV:"production",BASE_URL:"/"}).URL_API||"https://reqres.in/api",C=x.a.create({baseURL:k}),y=C,V=a("2f62");r["a"].use(V["a"]);var P=new V["a"].Store({state:{profile:{avatar:"",email:"",first_name:"",last_name:""},email:""},getters:{getProfile:function(e){return e.profile},getEmail:function(e){return e.email}},mutations:{setProfile:function(e,t){e.profile=t},setEmail:function(e,t){e.email=t},logout:function(e){e.profile=null,e.email=""}},actions:{},modules:{}}),S={login:function(e){return Object(_["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,y.post("/login",e).then((function(t){t=t.data;var a=e.email;localStorage.setItem("token",t.token),localStorage.setItem("email",a),P.commit("setEmail",a)}));case 2:return a=t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}}),t)})))()},signUp:function(e){return Object(_["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,y.post("/register",e).then((function(e){a=e.data}));case 2:return a=t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}}),t)})))()},getLoggedUser:function(){return Object(_["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=P.getters.getEmail||localStorage.getItem("email"),e.next=3,y.get("/users?per_page=13").then((function(e){var r=e.data.data;if(r)return a=r.find((function(e){return e.email===t})),a}));case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))()},updateProfile:function(e){return Object(_["a"])(regeneratorRuntime.mark((function t(){var a,r,n,o,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.id,r=e.email,n=e.first_name,o=e.last_name,i=e.avatar,t.next=3,y.put("/users/".concat(a),{email:r,first_name:n,last_name:o,avatar:i}).then((function(e){return s=e.data,s}));case 3:return s=t.sent,t.abrupt("return",s);case 5:case"end":return t.stop()}}),t)})))()},logout:function(){return Object(_["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:localStorage.clear(),P.commit("logout");case 2:case"end":return e.stop()}}),e)})))()},isAuthenticated:function(){return Object(_["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",null!==localStorage.getItem("token"));case 1:case"end":return e.stop()}}),e)})))()}},E=S,O={name:"Login",components:{},data:function(){return{email:"",password:"",checkbox:"",error:"",allFieldsFilled:!0}},methods:{cleanErrorMessage:function(){this.error="",this.allFieldsFilled=""==this.email||""==this.password},login:function(){var e=this;E.login({email:this.email,password:this.password}).then((function(){e.$router.push("/")})).catch((function(t){console.error("Não foi possível fazer login. ".concat(t)),e.error="E-mail e/ou senha incorretos."}))}}},j=O,I=a("8336"),F=a("b0af"),L=a("4bd4"),M=a("132d"),R=a("8654"),A=Object(l["a"])(j,g,b,!1,null,null,null),T=A.exports;u()(A,{VBtn:I["a"],VCard:F["a"],VForm:L["a"],VIcon:M["a"],VTextField:R["a"]});var $=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Header"),a("v-row",{staticClass:"v-container"},[a("v-col",{attrs:{cols:"12"}},[a("section",[a("router-view")],1)])],1)],1)},U=[],B=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-app-bar",{attrs:{dense:"",fixed:"",color:"#abafb0",dark:""}},[a("v-toolbar-title",{staticClass:"title"},[e._v("Places")]),a("v-spacer"),a("div",[a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,n=t.attrs;return[a("v-btn",e._g(e._b({attrs:{icon:""},on:{click:e.openMap}},"v-btn",n,!1),r),[a("v-icon",[e._v("mdi-map-marker")])],1)]}}])},[a("span",[e._v("Ver mapa")])]),a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,n=t.attrs;return[a("v-btn",e._g(e._b({attrs:{icon:""},on:{click:e.openProfile}},"v-btn",n,!1),r),[a("v-icon",[e._v("mdi-account")])],1)]}}])},[a("span",[e._v("Ver perfil")])]),a("v-btn",{attrs:{icon:""},on:{click:e.logout}},[a("v-icon",[e._v("mdi-logout")])],1)],1)],1)],1)},q=[],z={name:"Header",data:function(){return{mostrar:!1}},methods:{openMap:function(){var e=this;E.isAuthenticated().then((function(){e.$router.push("/")})).catch((function(e){return console.error("Não foi possível ir para o mapa. ".concat(e))}))},openProfile:function(){var e=this;E.isAuthenticated().then((function(){e.$router.push("/profile")})).catch((function(e){return console.error("Não foi possível ir para o mapa. ".concat(e))}))},logout:function(){var e=this;E.logout().then((function(){e.mostrar=!1,e.$router.push("/login")})).catch((function(e){return console.error("Não foi possível fazer logout. ".concat(e))}))}}},D=z,N=a("40dc"),H=a("2fa4"),Z=a("2a7f"),J=a("3a2f"),K=Object(l["a"])(D,B,q,!1,null,"50c8069c",null),G=K.exports;u()(K,{VAppBar:N["a"],VBtn:I["a"],VIcon:M["a"],VSpacer:H["a"],VToolbarTitle:Z["a"],VTooltip:J["a"]});var Q={name:"Layout",components:{Header:G}},W=Q,X=a("62ad"),Y=a("0fd9"),ee=Object(l["a"])(W,$,U,!1,null,null,null),te=ee.exports;u()(ee,{VCol:X["a"],VRow:Y["a"]});var ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{staticClass:" pa-4 background",attrs:{height:"100%",width:"100%",flat:""}},[a("v-snackbar",{attrs:{top:""},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(" "+e._s(e.message)+" "),[a("v-btn",{attrs:{color:"white",text:""},on:{click:e.goToLoginPage}},[e._v(" Ir para login ")])]],2),a("v-card",{staticClass:"centered login-card",attrs:{elevation:"2",outlined:"",tile:""}},[a("v-form",{ref:"form",staticClass:"login-form"},[a("div",{staticClass:"title-login"},[a("h2",[a("strong",[e._v("Cadastre-se")])])]),a("v-text-field",{attrs:{name:"name",label:"Nome",required:""},on:{input:e.cleanErrorMessage},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),a("v-text-field",{attrs:{name:"email",type:"email",label:"E-mail",required:""},on:{input:e.cleanErrorMessage},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),a("v-text-field",{attrs:{name:"password",type:"password",label:"Senha",required:""},on:{input:e.cleanErrorMessage},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),a("v-text-field",{attrs:{name:"confirmPassword",type:"password",label:"Confirmar senha",required:""},on:{input:e.cleanErrorMessage},model:{value:e.confirmPassword,callback:function(t){e.confirmPassword=t},expression:"confirmPassword"}}),a("div",{staticClass:"erro-msg"},[e._v(e._s(e.error))]),a("v-btn",{staticClass:"btn-login",attrs:{color:"#ee675c",height:"45px",disabled:e.allFieldsFilled},on:{click:e.signUp}},[a("div",{staticClass:"white-text"},[e._v("Cadastrar")])]),a("div",{staticClass:"sign-up"},[a("a",{attrs:{href:"../login"}},[e._v("Voltar para login")])])],1)],1)],1)},re=[],ne={name:"SignUp",components:{},data:function(){return{name:"",email:"",password:"",confirmPassword:"",snackbar:!1,allFieldsFilled:!0,error:"",message:""}},methods:{cleanErrorMessage:function(){this.error="",this.allFieldsFilled=""==this.name||""==this.email||""==this.password||""==this.confirmPassword},initialStates:function(){this.name="",this.email="",this.password="",this.confirmPassword="",this.error=""},goToLoginPage:function(){this.$router.push("/login")},signUp:function(){var e=this;this.password!==this.confirmPassword?this.error="As senhas devem ser iguais.":this.password.length<6?this.error="A senha deve conter pelo menos 6 caracteres.":E.signUp({email:this.email,password:this.password}).then((function(){e.snackbar=!0,e.message="Cadastro realizado com sucesso.",e.initialStates()})).catch((function(t){console.error("".concat(t)),e.error="Erro: apenas usuários definidos podem ser cadastrados."}))}}},oe=ne,ie=a("2db4"),se=Object(l["a"])(oe,ae,re,!1,null,null,null),le=se.exports;u()(se,{VBtn:I["a"],VCard:F["a"],VForm:L["a"],VSnackbar:ie["a"],VTextField:R["a"]});var ce=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"profile-container"},[a("v-snackbar",{attrs:{top:""},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(" "+e._s(e.message)+" "),[a("v-btn",{attrs:{color:"pink",text:""},on:{click:function(t){e.snackbar=!1}}},[e._v(" FECHAR ")])]],2),a("v-card",{staticClass:"mx-auto",attrs:{"max-width":"700",tile:""}},[a("v-img",{attrs:{height:"100%",src:"https://cdn.vuetifyjs.com/images/cards/server-room.jpg"}},[a("v-row",{staticClass:"fill-height",attrs:{align:"end"}},[a("v-col",{staticClass:"pa-0",attrs:{"align-self":"start",cols:"12"}},[a("v-avatar",{staticClass:"profile",attrs:{color:"grey",size:"164",tile:""}},[a("v-img",{attrs:{src:e.profile.avatar}})],1)],1),a("v-col",{staticClass:"py-4"},[a("v-list-item",{attrs:{color:"rgba(0, 0, 0, .4)",dark:""}},[a("v-list-item-content",[a("v-list-item-title",{staticClass:"title"},[a("h2",[e._v(e._s(e.name))])])],1)],1)],1)],1)],1),a("v-card-text",[a("h2",[a("v-btn",{attrs:{color:"#ee675c"},on:{click:e.enableEdition}},[a("div",{staticClass:"white-text"},[e._v("Editar perfil")])])],1),a("v-divider",{staticClass:"profile-divider"}),a("v-form",{ref:"form"},[a("v-text-field",{attrs:{name:"first_name",label:"Nome",required:"",disabled:e.view},on:{input:e.cleanErrorMessage},model:{value:e.profile.first_name,callback:function(t){e.$set(e.profile,"first_name",t)},expression:"profile.first_name"}}),a("v-text-field",{attrs:{name:"last_name",label:"Sobrenome",required:"",disabled:e.view},on:{input:e.cleanErrorMessage},model:{value:e.profile.last_name,callback:function(t){e.$set(e.profile,"last_name",t)},expression:"profile.last_name"}}),a("v-text-field",{attrs:{name:"email",label:"E-mail",required:"",disabled:e.view},on:{input:e.cleanErrorMessage},model:{value:e.profile.email,callback:function(t){e.$set(e.profile,"email",t)},expression:"profile.email"}}),a("div",{staticClass:"erro-msg"},[e._v(e._s(e.error))]),e.view?e._e():a("v-btn",{attrs:{color:"primary",disabled:e.allFieldsFilled},on:{click:e.updateProfile}},[a("div",{staticClass:"white-text"},[e._v("Salvar")])])],1)],1)],1)],1)},ue=[],me=a("5530"),pe={name:"Profile",data:function(){return{profile:{},name:"",view:!0,error:"",message:"",snackbar:!1,allFieldsFilled:!0}},methods:Object(me["a"])(Object(me["a"])({},Object(V["b"])(["setProfile"])),{},{cleanErrorMessage:function(){this.error="",this.allFieldsFilled=""==this.profile.first_name||""==this.profile.email||""==this.profile.last_name},enableEdition:function(){this.view=!1},updateProfile:function(){var e=this;E.updateProfile(this.profile).then((function(t){P.commit("setProfile",t),e.profile=t,e.name=t.first_name,e.message="O perfil foi atualizado.",e.view=!0,e.snackbar=!0}))}}),created:function(){var e=this;this.profile=P.getters.getProfile,this.profile.email||E.getLoggedUser().then((function(t){P.commit("setProfile",t),e.profile=t,e.name=t.first_name}))}},de=pe,fe=a("8212"),ve=a("99d9"),he=a("ce7e"),ge=a("adda"),be=a("da13"),_e=a("5d23"),we=Object(l["a"])(de,ce,ue,!1,null,"a08748d2",null),xe=we.exports;u()(we,{VAvatar:fe["a"],VBtn:I["a"],VCard:F["a"],VCardText:ve["b"],VCol:X["a"],VDivider:he["a"],VForm:L["a"],VImg:ge["a"],VListItem:be["a"],VListItemContent:_e["a"],VListItemTitle:_e["c"],VRow:Y["a"],VSnackbar:ie["a"],VTextField:R["a"]});var ke=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-snackbar",{attrs:{top:""},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(" "+e._s(e.errorMsg)+" "),[a("v-btn",{attrs:{color:"pink",text:""},on:{click:function(t){e.snackbar=!1}}},[a("v-icon",[e._v("mdi-close")])],1)]],2),a("v-row",[a("v-col",{attrs:{col:"9",lg:"8",md:"8",sm:"6"}},[a("gmap-map",{staticClass:"google-map-container",attrs:{center:{lat:this.lat,lng:this.lng},zoom:16}},e._l(e.places,(function(t,r){return a("gmap-marker",{key:r,attrs:{position:t.geometry.location},on:{click:function(a){e.center=t.position}}})})),1)],1),a("v-col",{attrs:{col:"3",lg:"4",md:"4",sm:"6"}},[a("v-card",{staticClass:"list-card col-12"},[a("v-card-title",[e._v(" Locais próximos ")]),a("v-card-subtitle",[e._v(" Ao escolher um tipo no campo abaixo, serão exibidos locais em um raio de 5km. ")]),a("v-select",{attrs:{items:e.items,"item-text":"text","item-value":"value",label:"Tipo do local",outlined:""},on:{change:e.changeType},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}}),a("v-list",{staticClass:"overflow-y-auto",staticStyle:{"max-height":"50vh"},attrs:{nav:"",dense:""}},[a("v-list-item-group",{attrs:{color:"primary"},model:{value:e.selectedItem,callback:function(t){e.selectedItem=t},expression:"selectedItem"}},e._l(e.places,(function(t,r){return a("v-list-item",{key:r},[a("v-list-item-icon",[a("v-icon",{domProps:{textContent:e._s("mdi-map-marker")}})],1),a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:e._s(t.name)}}),a("v-list-item-subtitle",{domProps:{textContent:e._s(t.vicinity)}})],1)],1)})),1)],1)],1)],1)],1)],1)},Ce=[],ye=(a("99af"),{name:"MapScreen",components:{},data:function(){return{type:"restaurant",items:[{text:"Restaurante",value:"restaurant"},{text:"Bar",value:"bar"},{text:"Supermercado",value:"supermarket"},{text:"Cinema",value:"cinema"},{text:"Praia",value:"beach"},{text:"Clube",value:"club"},{text:"Cafeterias",value:"cafe"},{text:"Teatro",value:"theater"},{text:"Museu",value:"museum"},{text:"Boate",value:"pubs"},{text:"Universidade",value:"university"},{text:"Escola",value:"school"},{text:"Posto de gasolina",value:"gasstation"}],menu:[{title:"Dashboard",icon:"mdi-view-dashboard"},{title:"Photos",icon:"mdi-image"},{title:"About",icon:"mdi-help-box"}],right:null,radius:"5",lat:0,lng:0,errorMsg:"",snackbar:!1,selectedItem:0,places:[]}},computed:{coordinates:function(){return"".concat(this.lat,", ").concat(this.lng)}},created:function(){var e=this;navigator.geolocation.getCurrentPosition((function(t){e.lat=t.coords.latitude,e.lng=t.coords.longitude,e.getPlaces(e.lat,e.lng)}))},methods:{getPlaces:function(e,t){var a=this,r="https://cors-anywhere.herokuapp.com/https://maps.googleapis.com/maps/api/place/nearbysearch/json?location=".concat(e,",").concat(t,"&type=").concat(this.type,"&radius=").concat(1e3*this.radius,"&key=AIzaSyDZkiASvelK1aD_el52h6BDv82yeS33CZk");y.get(r).then((function(e){a.places=e.data.results})).catch((function(e){a.errorMsg=e.message,a.snackbar=!0}))},changeType:function(){this.getPlaces(this.lat,this.lng)}}}),Ve=ye,Pe=a("8860"),Se=a("1baa"),Ee=a("34c3"),Oe=a("b974"),je=Object(l["a"])(Ve,ke,Ce,!1,null,null,null),Ie=je.exports;u()(je,{VBtn:I["a"],VCard:F["a"],VCardSubtitle:ve["a"],VCardTitle:ve["c"],VCol:X["a"],VIcon:M["a"],VList:Pe["a"],VListItem:be["a"],VListItemContent:_e["a"],VListItemGroup:Se["a"],VListItemIcon:Ee["a"],VListItemSubtitle:_e["b"],VListItemTitle:_e["c"],VRow:Y["a"],VSelect:Oe["a"],VSnackbar:ie["a"]}),r["a"].use(h["a"]);var Fe=[{path:"/",component:te,children:[{path:"",name:"MapScreen",component:Ie,auth:!1},{path:"/profile",name:"Profile",component:xe}]},{path:"/login",name:"Login",component:T},{path:"/signUp",name:"SignUp",component:le}],Le=new h["a"]({mode:"history",routes:Fe});Le.beforeEach((function(e,t,a){"Login"==e.name||"SignUp"==e.name||(E.isAuthenticated()?a():a({name:"Login"})),a()}));var Me=Le,Re=a("755e");r["a"].config.productionTip=!1,r["a"].use(Re,{load:{key:"AIzaSyDZkiASvelK1aD_el52h6BDv82yeS33CZk",libraries:"places,visualization"},installComponents:!0}),new r["a"]({vuetify:v,router:Me,render:function(e){return e(d)}}).$mount("#app")},b383:function(e,t,a){}});
//# sourceMappingURL=app.fc022e99.js.map